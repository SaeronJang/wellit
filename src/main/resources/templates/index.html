<html layout:decorate="~{layout}">
<body> 

	<div layout:fragment="content">
		<link rel="stylesheet" href="/css/index.css" />
		<link rel="stylesheet" href="/css/util.css" />
		
		
		<div class="backBg"></div>
		<div class="full-screen">
			<div id="player"></div> <!--메인무비-->
			
			<form action="/load/recommend" method="post" class="videoBox">
				<div class="row videoBoxText">
					<div class="col">
						지역별 취향별 추천하는 가게를 만나보세요~!
					</div>
				</div>
				<div class="row">
					<div class="selectVegetarian col-3 select-wrapper">
						<label for="vegetarian">나의 채식 취향</label>
						<select required aria-label="select example" name="vegetarian" id="vegetarian">
							<option value="비건">비건</option>
							<option value="프루테리언">프루테리언</option>
							<option value="락토 베지테리언">락토 베지테리언</option>
							<option value="오보 베지테리언">오보 베지테리언</option>
							<option value="락토 오보 베지테리언">락토 오보 베지테리언</option>
							<option value="페스코 베지테리언">페스코 베지테리언</option>
							<option value="폴로 베지테리언">폴로 베지테리언</option>
							<option value="플렉시테리언">플렉시테리언</option>
						</select>
					</div>
					<div class="location-select col-7">
						<div class="select-wrapper">
							<label for="sido">시/도</label>
							<select id="sido" name="sido"></select>
						</div>
						<div class="select-wrapper">
							<label for="sigungu">시/군/구</label>
							<select id="sigungu" name="sigungu"></select>
						</div>
					</div>
					<div class="col-1 recommendButton">
						<button type="submit" class="btn hm-btn-green">확인</button>
					</div>
				</div>

			</form>
		</div>

		<section id="places">
			<div class="row">
				<div class="my-5">

				</div>
				<div class="col text-center my-5 titleText">
					🏡 이런 곳은 어때요?
				</div>
			</div>
			<div class="container">
				<div class="recommendedPlaces">
					<div th:each="store, iterStat : ${stores}" class="recommendedPlace"
						th:class="${iterStat.index == 0} ? 'recommendedPlace active' : 'recommendedPlace'">
						<img th:src="${store.stoImage}" alt="${store.stoName}">
						<div class="recommendedPlaceText">
							<div class="recommendedPlaceHeader d-flex justify-content-between align-items-center">
								<h1 th:text="${store.stoName}">가게 이름</h1>
								<span class="icons d-flex align-items-center ">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black"
										class="bi bi-eye" viewBox="0 0 16 16">
										<path
											d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z" />
										<path
											d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0" />
									</svg>
									<span th:text="${store.viewCount}"></span>
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black"
										class="bi bi-chat" viewBox="0 0 16 16">
										<path
											d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105" />
									</svg>
									<span th:text="${store.storeReviews.size}"></span>
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black"
										class="bi bi-heart" viewBox="0 0 16 16">
										<path
											d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15" />
									</svg>
									<span th:text="${store.favoriteStores.size}"></span>
								</span>
							</div>
							<p th:text="${store.stoContent}">가게 설명</p>
							<table class="table">
								<tbody>
									<tr>
										<td><strong>카테고리</strong></td>
										<td><span th:text="${store.stoCategory}"></span></td>
									</tr>
									<tr>
										<td><strong>연락처</strong></td>
										<td><span th:text="${store.stoContact}"></span></td>
									</tr>
									<tr>
										<td><strong>주소</strong></td>
										<td><span th:text="${store.stoAddress}"></span></td>
									</tr>
									<tr>
										<td><strong>운영 시간</strong></td>
										<td><span th:text="${store.stoOperatingHours}"></span></td>
									</tr>
									<tr>
										<td><strong>휴무일</strong></td>
										<td><span th:text="${store.stoClosedDays}"></span></td>
									</tr>
									<tr>
										<td><strong>추천 메뉴</strong></td>
										<td><span th:text="${store.stoRecommendedMenu}"></span></td>
									</tr>
									<tr>
										<td><strong>주차 정보</strong></td>
										<td><span th:text="${store.stoParkingInfo}"></span></td>
									</tr>
									<tr>
										<td><strong>채식 옵션</strong></td>
										<td><span th:text="${store.stoVegetarianType}"></span></td>
									</tr>
									<tr>
										<td><strong>운영 상태</strong></td>
										<td><span th:text="${store.isOpen} ? '영업 중' : '영업 종료'"></span></td>
									</tr>
								</tbody>
							</table>

							<a class="btn hm-btn-green" th:href="@{'/load/place/' + ${store.stoId}}"
								th:text="'자세히 보기'"></a>

						</div>
					</div> <!-- //recommendedPlace -->
				</div> <!-- //recommendedPlaces -->
			</div>
		</section>
		<section th:replace="products :: products">

		</section>
		<section id="information">
			<div class="row">
				<div class="mt-5">
					<div class="col text-center my-5 pt-5 titleText">
						웨릿 특별 레시피📕
					</div>
				</div>
			</div>
			<div class="inforCarousel">
				<ul class="inforCarouselList">
					<li th:each="recipe : ${recipes}">
						<div class="card">
							<a th:href="@{/life/recipe/detail(id=${recipe.id})}">
								<img th:src="${recipe.recpmainImgList[0].imgSrc}" class="card-img-top"
									alt="Recipe Image" onerror="this.src='default-image-url.jpg'">
								<div class="card-body">
									<h5 class="card-title" th:text="${recipe.recpName}">레시피 이름</h5>
									<p class="card-text" th:text="${recipe.recpIntroduce}">레시피 소개</p>
									<p>
										<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black"
											class="bi bi-people-fill" viewBox="0 0 16 16">
											<path
												d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5" />
										</svg>
										<span th:text="${recipe.servings}">0</span>인분
										<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black"
											class="bi bi-alarm" viewBox="0 0 16 16">
											<path
												d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z" />
											<path
												d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1" />
										</svg>
										<span th:text="${recipe.cookTime}">0</span> 분
									</p>
									<p th:text="${recipe.recpTags}" class="text-danger fw-bold"></p>
									<div class="icons">
										<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#808080"
											class="bi bi-eye" viewBox="0 0 16 16">
											<path
												d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z" />
											<path
												d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0" />
										</svg>
										<span th:text="${recipe.viewCount}"></span>
										<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#808080"
											class="bi bi-heart" viewBox="0 0 16 16">
											<path
												d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15" />
										</svg>
										<span th:text="${recipe.favoriteRecipes.size}"></span>
									</div>
								</div>
							</a>
						</div>
					</li>
				</ul>
			</div>
			<div class="mobileInforCarousel">
				<ul class="mobileInforCarouselList">
					<li th:each="recipe : ${reverseRecipes}">
						<div class="card">
							<a th:href="@{/life/recipe/detail(id=${recipe.id})}">
								<img th:src="${recipe.recpmainImgList[0].imgSrc}" class="card-img-top"
									alt="Recipe Image" onerror="this.src='default-image-url.jpg'">
								<div class="card-body">
									<h5 class="card-title" th:text="${recipe.recpName}">레시피 이름</h5>
									<p class="card-text" th:text="${recipe.recpIntroduce}">레시피 소개</p>
									<p><strong>인분:</strong> <span th:text="${recipe.servings}">0</span></p>
									<p><strong>소요 시간:</strong> <span th:text="${recipe.cookTime}">0</span> 분</p>
								</div>
							</a>
						</div>
					</li>
				</ul>
			</div>

		</section>

		<div id="deletemessage" th:if="${successMessage}" th:text="${successMessage}" style="display:none;"></div>
		
		<script src="https://www.youtube.com/iframe_api"></script>
		
		<script>
			window.onload = function () {
				// 'deletemessage' id를 가진 div 요소를 가져옵니다.
				var messageElement = document.getElementById("deletemessage");
				// div의 텍스트 내용이 비어 있지 않으면 alert 창을 띄웁니다.
				if (messageElement && messageElement.innerText.trim() !== "") {
					alert(messageElement.innerText);
				}
			}
			const urlParams = new URLSearchParams(window.location.search);
			const message = urlParams.get('message');
			if (message) {
				alert(message);
			}
			const sidoSelect = document.getElementById('sido');
			const sigunguSelect = document.getElementById('sigungu');

			// 시/도 데이터
			const sido = [
				'서울', '부산', '대구', '인천', '광주', '대전', '울산',
				'세종', '경기', '강원', '충북', '충남', '전북', '전남', '경북', '경남', '제주'
			];

			// 시/군/구 데이터 (예시)
			const sigungu = {
				'서울': ['강남구', '강동구', '강북구', '관악구', '구로구', '금천구', '노원구', '도봉구', '동대문구', '동작구', '마포구', '서대문구', '서초구', '성동구', '성북구', '송파구', '양천구', '영등포구', '용산구', '은평구', '종로구', '중구', '중랑구'],
				'부산': ["강서구", "금정구", "기장군", "남구", "동구", "부산진구", "북구", "사상구", "사하구", "서구", "수영구", "연제구", "영도구", "중구"],
				"대구": ["남구", "달서구", "달성군", "동구", "북구", "서구", "수성구", "중구"],
				'인천': ['강화군', '계양구', '남동구', '동구', '미추홀구', '부평구', '서구', '연수구', '옹진군', '중구'],
				'광주': ['광산구', '남구', '동구', '북구', '서구'],
				'대전': ['대덕구', '동구', '서구', '유성구', '중구'],
				'울산': ['남구', '동구', '북구', '울주군', '중구'],
				'세종': ['세종시'],
				'경기': ['가평군', '고양시', '과천시', '광명시', '광주시', '구리시', '군포시', '김포시', '남양주시', '동두천시', '부천시', '성남시', '수원시', '시흥시', '안산시', '안성시', '양주시', '양평군', '여주시', '오산시', '용인시', '의왕시', '의정부시', '이천시', '파주시', '평택시', '하남시', '화성시'],
				'강원': ['강릉시', '고성군', '동해시', '삼척시', '속초시', '양구군', '양양군', '영월군', '원주시', '철원군', '춘천시', '태백시', '평창군', '홍천군', '화천군', '횡성군'],
				'충북': ['괴산군', '단양군', '보은군', '영동군', '옥천군', '음성군', '제천시', '청주시', '충주시'],
				'충남': ['계룡시', '공주시', '논산시', '당진시', '보령시', '서산시', '아산시', '천안시', '청양군', '태안군', '홍성군'],
				'전북': ['고창군', '군산시', '김제시', '남원시', '익산시', '전주시', '정읍시', '완주군', '임실군', '장수군', '진안군'],
				'전남': ['강진군', '고흥군', '곡성군', '광양시', '구례군', '나주', '담양군', '목포시', '무안군', '보성군', '신안군', '여수시', '영광군', '영암군', '완도군', '장성군', '장흥군', '진도군', '함평군', '해남군', '화순군'],
				'경북': ['경산시', '경주', '고령군', '구미시', '김천시', '문경시', '상주', '성주군', '안동시', '영주', '영천시', '예천군', '울릉군', '울진군', '포항시'],
				'경남': ['거제시', '거창군', '고성군', '김해시', '남해군', '밀양시', '사천시', '산청군', '양산시', '의령군', '진주', '창녕군', '창원시', '통영시'],
				'제주': ['서귀포시', '제주시']
			};

			// 시/도 옵션 생성
			sido.forEach(s => {
				const option = document.createElement('option');
				option.value = s;
				option.text = s;
				sidoSelect.add(option);
			});

			// 시/군/구 옵션 생성 (서울특별시 기본)
			updateSigungu('서울');

			// 시/도 선택 시 시/군/구 업데이트
			sidoSelect.addEventListener('change', () => {
				const selectedSido = sidoSelect.value;
				updateSigungu(selectedSido);
			});

			function updateSigungu(selectedSido) {
				sigunguSelect.innerHTML = '';
				sigungu[selectedSido].forEach(sg => {
					const option = document.createElement('option');
					option.value = sg;
					option.text = sg;
					sigunguSelect.add(option);
				});
			}








      function updateClass() {
          var $buttonDiv = $('.recommendButton');
          if ($(window).outerWidth() < 1024) {
              $buttonDiv.removeClass('col-1').addClass('col-12'); // 작은 화면에서는 전체 너비를 차지하도록 변경
          } else {
              $buttonDiv.removeClass('col-12').addClass('col-1'); // 큰 화면에서는 원래 클래스로 복원
          }
      }

      
      
      
      
      
      // 창 크기 변경 시 클래스 업데이트
      $(window).on('resize', updateClass);

      $(document).ready(() => {


          let recommendedPlace = $(".recommendedPlace")
          recommendedPlace.mouseover(function () {
              recommendedPlace.removeClass("active")
              $(this).addClass("active")
          })
          var $carousel = $('.inforCarouselList');
          var $carouselItems = $carousel.find('li');
          var itemWidth = $carouselItems.outerWidth(true);
          var itemCount = $carouselItems.length;
          var carouselWidth = itemWidth * itemCount;
          var isMouseOverMenu = false;
          var carouselInterval;

          $carousel.css('width', carouselWidth);

          function moveCarousel() {
              $carousel.stop(true, true).animate({
                  left: '-=' + itemWidth
              }, 3000, 'linear', function () {
                  $carousel.css('left', 0);
                  $carousel.append($carousel.find('li:first'));
              });
          }

          function startCarousel() {
              carouselInterval = setInterval(moveCarousel, 3000);
          }

          function stopCarousel() {
              $carousel.stop(true, true);
              clearInterval(carouselInterval);
          }

          startCarousel();

          $carousel.hover(
              function () {
                  isMouseOverMenu = true;
                  stopCarousel();
              },
              function () {
                  isMouseOverMenu = false;
                  startCarousel();
              }
          );

          var $moCarousel = $('.mobileInforCarouselList');
          var $moCarouselItems = $moCarousel.find('li');
          var moItemWidth = $moCarouselItems.outerWidth(true);
          var moItemCount = $moCarouselItems.length;
          var moCarouselWidth = moItemWidth * moItemCount;
          var isMouseOverMoMenu = false;
          var carouselMoInterval;

          $moCarousel.css('width', moCarouselWidth);

          function moveMoCarousel() {
              $moCarousel.stop(true, true).animate({
                  left: '-=' + moItemWidth
              }, 3000, 'linear', function () {
                  $moCarousel.css('left', 0);
                  $moCarousel.append($moCarousel.find('li:first'));
              });
          }

          function startMOCarousel() {
              carouselMoInterval = setInterval(moveMoCarousel, 3000);
          }

          function stopMoCarousel() {
              $moCarousel.stop(true, true);
              clearInterval(carouselMoInterval);
          }

          startMOCarousel();

          $moCarousel.hover(
              function () {
                  isMouseOverMoMenu = true;
                  stopMoCarousel();
              },
              function () {
                  isMouseOverMoMenu = false;
                  stopMoCarousel();
              }
          );

          const navbar = $("header")
          const menu = $(".custom-menu");
          const submenu = $(".custom-menu.custom-sub");

          menu.mouseover(function () {
              navbar.css({background: "#386641"})
          });

          submenu.mouseover(function () {
              navbar.css({background: "#386641"})
          })

          menu.mouseout(function () {
              navbar.css({background: "linear-gradient(180deg, rgba(134, 143, 52, 1) 30%, rgba(255, 255, 255, 0) 100%)"})
          })

          submenu.mouseout(function () {
              navbar.css({background: "linear-gradient(180deg, rgba(134, 143, 52, 1) 30%, rgba(255, 255, 255, 0) 100%)"})
          })
          var height = $("#places").offset().top - 40;
          var hasClass = false;
          var isMouseOverPlace = false;
          $(window).on("scroll", () => {

              if (isMouseOverPlace) return;

              if ($(window).scrollTop() > height && !hasClass) {
                  navbar.css({background: "#386641"})
                  hasClass = true;
              }
              if ($(window).scrollTop() < height && hasClass) {
                  navbar.css({background: "linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(255,255,255,0) 100%)"})
                  hasClass = false;
              }
          })


      })
		
		</script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- jQuery 라이브러리 추가 -->
		<script>
        var player;
        var isPlayerReady = false;

        // YouTube API가 준비되었을 때 호출되는 함수
        function onYouTubeIframeAPIReady() {
            createPlayer(); // 플레이어 생성
        }

        // YouTube Player 생성 함수
        function createPlayer() {
            var videoId = window.innerHeight > window.innerWidth ? 'FaFE8ymidb8' : 'BczWUWfwGyE'; // 세로형 또는 가로형 동영상 선택
            player = new YT.Player('player', {
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,
                    'rel': 0,
                    'modestbranding': 1,
                    'loop': 1,
                    'playlist': videoId
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 플레이어가 준비되었을 때 호출되는 함수
        function onPlayerReady(event) {
            isPlayerReady = true;
            event.target.playVideo(); // 자동 재생
        }

        // 화면 크기에 맞춰 full-screen의 높이를 설정하는 함수
        function setFullScreenHeight() {
            // 실제 브라우저 콘텐츠 영역의 높이를 계산 (도구창 및 주소창을 제외한 영역)
            var contentHeight = window.innerHeight;
            $('.full-screen').css('height', contentHeight + 'px'); // jQuery로 full-screen 높이 설정

            // 동영상이 항상 16:9 비율을 유지하고, 높이에 맞추고 가로가 초과되도록 설정
            var $playerElement = $('#player'); // jQuery로 요소 선택
            var winAspectRatio = window.innerWidth / contentHeight;
            var videoAspectRatio = 16 / 9; // 16:9 비율 유지

            if (winAspectRatio < videoAspectRatio) {
                // 브라우저가 16:9보다 좁을 때: 높이를 맞추고 가로를 초과시킴
                $playerElement.css('height', '100%');
                var playerHeight = $playerElement.height(); // jQuery로 높이 가져오기
                $playerElement.css('width', (playerHeight / 9) * 16 + 'px'); // 16:9 비율로 너비 설정
            } else {
                // 브라우저가 16:9보다 넓을 때
                $playerElement.css('width', '100%');
                var playerWidth = $playerElement.width(); // jQuery로 너비 가져오기
                $playerElement.css('height', (playerWidth / 16) * 9 + 'px'); // 16:9 비율로 높이 설정
            }
        }

        // 플레이어 상태 변경 시 호출되는 함수
        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.ENDED) {
                console.log('Video has ended.');
            }
        }

        // 창 크기 변경 시 높이 업데이트 및 동영상 크기 업데이트
        $(window).on('resize', setFullScreenHeight); // jQuery로 resize 이벤트 추가

        // 페이지 로드 시 초기 설정
        $(document).ready(function() {
            setFullScreenHeight(); // 초기 full-screen 크기 설정
        });
		</script>
	
	
	
	
	
	</div>
</body>

</html>





























































